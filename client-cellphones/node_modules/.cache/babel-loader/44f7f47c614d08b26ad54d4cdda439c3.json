{"ast":null,"code":"var _jsxFileName = \"D:\\\\STUDY\\\\PTIT\\\\NAM_4\\\\KI_1\\\\LT_WEB\\\\BTL_GiuaKy\\\\cellphons\\\\client-cellphones\\\\src\\\\pages\\\\ChatPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Header from '../components/header/Header';\nimport Footer from '../components/footer/Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatPage(props) {\n  _s();\n  const [fileInputState, setFileInputState] = useState('');\n  const [previewSource, setPreviewSource] = useState('');\n  const [selectedFile, setSelectedFile] = useState();\n  const [successMsg, setSuccessMsg] = useState('');\n  const [errMsg, setErrMsg] = useState('');\n  const handleFileInputChange = e => {\n    const file = e.target.files[0];\n    previewFile(file);\n    setSelectedFile(file);\n    setFileInputState(e.target.value);\n  };\n  const previewFile = file => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n      setPreviewSource(reader.result);\n    };\n  };\n  const handleSubmitFile = e => {\n    e.preventDefault();\n    if (!selectedFile) return;\n    const reader = new FileReader();\n    reader.readAsDataURL(selectedFile);\n    reader.onloadend = () => {\n      uploadImage(reader.result);\n    };\n    reader.onerror = () => {\n      console.error('AHHHHHHHH!!');\n      setErrMsg('something went wrong!');\n    };\n  };\n  const uploadImage = async base64EncodedImage => {\n    try {\n      await fetch('http://localhost:4000/api/upload', {\n        method: 'POST',\n        body: JSON.stringify({\n          data: base64EncodedImage\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      setFileInputState('');\n      setPreviewSource('');\n      setSuccessMsg('Image uploaded successfully');\n    } catch (err) {\n      console.error(err);\n      setErrMsg('Something went wrong!');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2rem',\n        minHeight: '80vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"title\",\n        children: \"Upload an Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmitFile,\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"fileInput\",\n          type: \"file\",\n          name: \"image\",\n          onChange: handleFileInputChange,\n          value: fileInputState,\n          className: \"form-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), previewSource && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: previewSource,\n        alt: \"chosen\",\n        style: {\n          height: '300px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n_s(ChatPage, \"2aFhbxnEVkg4HfBquPzG980rU0o=\");\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useState","Header","Footer","jsxDEV","_jsxDEV","ChatPage","props","_s","fileInputState","setFileInputState","previewSource","setPreviewSource","selectedFile","setSelectedFile","successMsg","setSuccessMsg","errMsg","setErrMsg","handleFileInputChange","e","file","target","files","previewFile","value","reader","FileReader","readAsDataURL","onloadend","result","handleSubmitFile","preventDefault","uploadImage","onerror","console","error","base64EncodedImage","fetch","method","body","JSON","stringify","data","headers","err","children","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","minHeight","className","onSubmit","id","type","name","onChange","src","alt","height","_c","$RefreshReg$"],"sources":["D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/cellphons/client-cellphones/src/pages/ChatPage.js"],"sourcesContent":["import React, {useState} from 'react';\r\nimport Header from '../components/header/Header';\r\nimport Footer from '../components/footer/Footer';\r\n\r\nfunction ChatPage(props) {\r\n    const [fileInputState, setFileInputState] = useState('');\r\n    const [previewSource, setPreviewSource] = useState('');\r\n    const [selectedFile, setSelectedFile] = useState();\r\n    const [successMsg, setSuccessMsg] = useState('');\r\n    const [errMsg, setErrMsg] = useState('');\r\n    \r\n    const handleFileInputChange = (e) => {\r\n        const file = e.target.files[0];\r\n        previewFile(file);\r\n        setSelectedFile(file);\r\n        setFileInputState(e.target.value);\r\n    };\r\n\r\n    const previewFile = (file) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onloadend = () => {\r\n            setPreviewSource(reader.result);\r\n        };\r\n    };\r\n\r\n    const handleSubmitFile = (e) => {\r\n        e.preventDefault();\r\n        if (!selectedFile) return;\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(selectedFile);\r\n        reader.onloadend = () => {\r\n            uploadImage(reader.result);\r\n        };\r\n        reader.onerror = () => {\r\n            console.error('AHHHHHHHH!!');\r\n            setErrMsg('something went wrong!');\r\n        };\r\n    };\r\n\r\n    const uploadImage = async (base64EncodedImage) => {\r\n        try {\r\n            await fetch('http://localhost:4000/api/upload', {\r\n                method: 'POST',\r\n                body: JSON.stringify({ data: base64EncodedImage }),\r\n                headers: { 'Content-Type': 'application/json' },\r\n            });\r\n            setFileInputState('');\r\n            setPreviewSource('');\r\n            setSuccessMsg('Image uploaded successfully');\r\n        } catch (err) {\r\n            console.error(err);\r\n            setErrMsg('Something went wrong!');\r\n        }\r\n    };\r\n    return (\r\n        <div>\r\n            <Header></Header>\r\n            <div style={{padding: '2rem', minHeight: '80vh'}}>\r\n                <h1 className=\"title\">Upload an Image</h1>\r\n                {/* <Alert msg={errMsg} type=\"danger\" />\r\n                <Alert msg={successMsg} type=\"success\" /> */}\r\n                <form onSubmit={handleSubmitFile} className=\"form\">\r\n                    <input\r\n                        id=\"fileInput\"\r\n                        type=\"file\"\r\n                        name=\"image\"\r\n                        onChange={handleFileInputChange}\r\n                        value={fileInputState}\r\n                        className=\"form-input\"\r\n                    />\r\n                    <button className=\"btn\" type=\"submit\">\r\n                        Submit\r\n                    </button>\r\n                </form>\r\n                {previewSource && (\r\n                    <img\r\n                        src={previewSource}\r\n                        alt=\"chosen\"\r\n                        style={{ height: '300px' }}\r\n                    />\r\n                )}\r\n            </div>\r\n            <Footer></Footer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChatPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}