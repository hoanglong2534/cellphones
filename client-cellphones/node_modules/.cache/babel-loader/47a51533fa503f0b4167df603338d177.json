{"ast":null,"code":"import _objectSpread from\"C:/Users/admin/Download/project-long/cellphones/client-cellphones/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useRef,useState}from'react';import{Canvas,useFrame}from'@react-three/fiber';import*as THREE from'three';import{ARButton}from'three/examples/jsm/webxr/ARButton.js';import{VRButton}from'three/examples/jsm/webxr/VRButton.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SpinningBox(props){const meshRef=useRef();useFrame((_state,delta)=>{if(meshRef.current){meshRef.current.rotation.x+=delta*0.5;meshRef.current.rotation.y+=delta*0.8;}});return/*#__PURE__*/_jsxs(\"mesh\",_objectSpread(_objectSpread({ref:meshRef},props),{},{children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[0.25,0.25,0.25]}),/*#__PURE__*/_jsx(\"meshStandardMaterial\",{color:\"#4CC3D9\"})]}));}export default function R3FXRViewer(){const[gl,setGl]=useState(null);const arBtnWrapRef=useRef(null);const vrBtnWrapRef=useRef(null);useEffect(()=>{if(!gl)return;// Enable WebXR on renderer\ngl.xr.enabled=true;// Append AR/VR helper buttons from three.js examples to our containers\n// They handle feature detection and session start/stop\nif(arBtnWrapRef.current&&arBtnWrapRef.current.childElementCount===0){const arBtn=ARButton.createButton(gl,{requiredFeatures:[]});arBtn.style.position='relative';arBtn.style.margin='0';arBtn.style.width='100%';arBtnWrapRef.current.appendChild(arBtn);}if(vrBtnWrapRef.current&&vrBtnWrapRef.current.childElementCount===0){const vrBtn=VRButton.createButton(gl);vrBtn.style.position='relative';vrBtn.style.margin='0';vrBtn.style.width='100%';vrBtnWrapRef.current.appendChild(vrBtn);}},[gl]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:8,gridTemplateColumns:'1fr 1fr'},children:[/*#__PURE__*/_jsx(\"div\",{ref:arBtnWrapRef}),/*#__PURE__*/_jsx(\"div\",{ref:vrBtnWrapRef})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:420,borderRadius:12,overflow:'hidden',border:'1px solid #333'},children:/*#__PURE__*/_jsxs(Canvas,{onCreated:_ref=>{let{gl:renderer,scene,camera}=_ref;// Match device pixel ratio for clarity\nrenderer.setPixelRatio(Math.min(window.devicePixelRatio,2));renderer.outputEncoding=THREE.sRGBEncoding;setGl(renderer);// Initial camera position\ncamera.position.set(0,0.25,1.2);},children:[/*#__PURE__*/_jsx(\"ambientLight\",{intensity:0.5}),/*#__PURE__*/_jsx(\"directionalLight\",{position:[1,1,1],intensity:0.8}),/*#__PURE__*/_jsxs(\"mesh\",{rotation:[-Math.PI/2,0,0],position:[0,-0.2,0],children:[/*#__PURE__*/_jsx(\"planeGeometry\",{args:[10,10]}),/*#__PURE__*/_jsx(\"meshStandardMaterial\",{color:\"#222\"})]}),/*#__PURE__*/_jsx(SpinningBox,{position:[0,0,0]})]})}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'#888',margin:0},children:\"G\\u1EE3i \\xFD: Nh\\u1EA5n \\\"ENTER AR\\\" tr\\xEAn thi\\u1EBFt b\\u1ECB h\\u1ED7 tr\\u1EE3 WebXR (Chrome Android) ho\\u1EB7c \\\"ENTER VR\\\" tr\\xEAn tr\\xECnh duy\\u1EC7t/thi\\u1EBFt b\\u1ECB h\\u1ED7 tr\\u1EE3 VR \\u0111\\u1EC3 tr\\u1EA3i nghi\\u1EC7m. Tr\\xEAn desktop, b\\u1EA1n c\\xF3 th\\u1EC3 xoay/move camera b\\u1EB1ng chu\\u1ED9t m\\u1EB7c \\u0111\\u1ECBnh c\\u1EE7a tr\\xECnh duy\\u1EC7t.\"})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","Canvas","useFrame","THREE","ARButton","VRButton","jsx","_jsx","jsxs","_jsxs","SpinningBox","props","meshRef","_state","delta","current","rotation","x","y","_objectSpread","ref","children","args","color","R3FXRViewer","gl","setGl","arBtnWrapRef","vrBtnWrapRef","xr","enabled","childElementCount","arBtn","createButton","requiredFeatures","style","position","margin","width","appendChild","vrBtn","display","gap","gridTemplateColumns","height","borderRadius","overflow","border","onCreated","_ref","renderer","scene","camera","setPixelRatio","Math","min","window","devicePixelRatio","outputEncoding","sRGBEncoding","set","intensity","PI","fontSize"],"sources":["C:/Users/admin/Download/project-long/cellphones/client-cellphones/src/components/ARViewer/R3FXRViewer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { Canvas, useFrame } from '@react-three/fiber';\r\nimport * as THREE from 'three';\r\nimport { ARButton } from 'three/examples/jsm/webxr/ARButton.js';\r\nimport { VRButton } from 'three/examples/jsm/webxr/VRButton.js';\r\n\r\nfunction SpinningBox(props) {\r\n    const meshRef = useRef();\r\n    useFrame((_state, delta) => {\r\n        if (meshRef.current) {\r\n            meshRef.current.rotation.x += delta * 0.5;\r\n            meshRef.current.rotation.y += delta * 0.8;\r\n        }\r\n    });\r\n    return (\r\n        <mesh ref={meshRef} {...props}>\r\n            <boxGeometry args={[0.25, 0.25, 0.25]} />\r\n            <meshStandardMaterial color=\"#4CC3D9\" />\r\n        </mesh>\r\n    );\r\n}\r\n\r\nexport default function R3FXRViewer() {\r\n    const [gl, setGl] = useState(null);\r\n    const arBtnWrapRef = useRef(null);\r\n    const vrBtnWrapRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!gl) return;\r\n        // Enable WebXR on renderer\r\n        gl.xr.enabled = true;\r\n\r\n        // Append AR/VR helper buttons from three.js examples to our containers\r\n        // They handle feature detection and session start/stop\r\n        if (arBtnWrapRef.current && arBtnWrapRef.current.childElementCount === 0) {\r\n            const arBtn = ARButton.createButton(gl, { requiredFeatures: [] });\r\n            arBtn.style.position = 'relative';\r\n            arBtn.style.margin = '0';\r\n            arBtn.style.width = '100%';\r\n            arBtnWrapRef.current.appendChild(arBtn);\r\n        }\r\n        if (vrBtnWrapRef.current && vrBtnWrapRef.current.childElementCount === 0) {\r\n            const vrBtn = VRButton.createButton(gl);\r\n            vrBtn.style.position = 'relative';\r\n            vrBtn.style.margin = '0';\r\n            vrBtn.style.width = '100%';\r\n            vrBtnWrapRef.current.appendChild(vrBtn);\r\n        }\r\n    }, [gl]);\r\n\r\n    return (\r\n        <div style={{ display: 'grid', gap: 12 }}>\r\n            <div style={{ display: 'grid', gap: 8, gridTemplateColumns: '1fr 1fr' }}>\r\n                <div ref={arBtnWrapRef} />\r\n                <div ref={vrBtnWrapRef} />\r\n            </div>\r\n\r\n            <div style={{ width: '100%', height: 420, borderRadius: 12, overflow: 'hidden', border: '1px solid #333' }}>\r\n                <Canvas onCreated={({ gl: renderer, scene, camera }) => {\r\n                    // Match device pixel ratio for clarity\r\n                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\r\n                    renderer.outputEncoding = THREE.sRGBEncoding;\r\n                    setGl(renderer);\r\n                    // Initial camera position\r\n                    camera.position.set(0, 0.25, 1.2);\r\n                }}>\r\n                    <ambientLight intensity={0.5} />\r\n                    <directionalLight position={[1, 1, 1]} intensity={0.8} />\r\n\r\n                    {/* Ground (only visible in VR/desktop) */}\r\n                    <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -0.2, 0]}>\r\n                        <planeGeometry args={[10, 10]} />\r\n                        <meshStandardMaterial color=\"#222\" />\r\n                    </mesh>\r\n\r\n                    <SpinningBox position={[0, 0, 0]} />\r\n                </Canvas>\r\n            </div>\r\n\r\n            <p style={{ fontSize: 14, color: '#888', margin: 0 }}>\r\n                Gợi ý: Nhấn \"ENTER AR\" trên thiết bị hỗ trợ WebXR (Chrome Android) hoặc\r\n                \"ENTER VR\" trên trình duyệt/thiết bị hỗ trợ VR để trải nghiệm. Trên desktop, bạn có thể xoay/move camera bằng chuột mặc định của trình duyệt.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}