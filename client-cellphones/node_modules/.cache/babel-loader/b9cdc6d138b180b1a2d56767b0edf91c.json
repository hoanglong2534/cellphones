{"ast":null,"code":"var _jsxFileName = \"D:\\\\STUDY\\\\PTIT\\\\NAM_4\\\\KI_1\\\\LT_WEB\\\\BTL_GiuaKy\\\\cellphons\\\\client-cellphones\\\\src\\\\components\\\\Admin\\\\components\\\\AppChat\\\\Contact\\\\Contact.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getAllConversationList, showConversation, updateIdConversation, updateLastMessageConversation } from '../../../../../actions/ChatAction';\nimport ListConversation from './ListConversation';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Contact(props) {\n  _s();\n  let socket;\n  const ENDPOINT = 'localhost:5000';\n  const dispatch = useDispatch();\n  const conversationList = useSelector(state => state.chat.conversationList);\n  const idConversation = useSelector(state => state.chat.idConversation);\n  if (conversationList) {}\n  useEffect(() => {\n    dispatch(getAllConversationList());\n  }, []);\n  useEffect(() => {\n    if (conversationList) {\n      dispatch(updateIdConversation(conversationList[0]));\n    }\n  }, [conversationList]);\n\n  // useEffect(() => {\n  //     dispatch(SeenConversation(idConversation))\n  // }, [idConversation])\n\n  useEffect(() => {\n    socket = io(ENDPOINT);\n    socket.on('lastMessage', async data => {\n      await dispatch(updateLastMessageConversation(data));\n      dispatch(getAllConversationList());\n    });\n    socket.on('show-me', data => {\n      dispatch(showConversation(data));\n    });\n    return () => socket.disconnect();\n  }, []);\n  const onConversationClick = conversation => {\n    dispatch(updateIdConversation(conversation));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contact\",\n    children: conversationList ? /*#__PURE__*/_jsxDEV(ListConversation, {\n      conversationList: conversationList,\n      onConversationClick: onConversationClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 37\n    }, this) : ''\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s(Contact, \"8xJiMv8KwdwWP+d1gpJMnlyDW7c=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = Contact;\nexport default Contact;\nvar _c;\n$RefreshReg$(_c, \"Contact\");","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","getAllConversationList","showConversation","updateIdConversation","updateLastMessageConversation","ListConversation","io","jsxDEV","_jsxDEV","Contact","props","_s","socket","ENDPOINT","dispatch","conversationList","state","chat","idConversation","on","data","disconnect","onConversationClick","conversation","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/cellphons/client-cellphones/src/components/Admin/components/AppChat/Contact/Contact.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport { getAllConversationList, showConversation, updateIdConversation, updateLastMessageConversation } from '../../../../../actions/ChatAction';\r\nimport ListConversation from './ListConversation';\r\nimport io from 'socket.io-client'\r\n\r\nfunction Contact(props) {\r\n    let socket\r\n    const ENDPOINT = 'localhost:5000';\r\n    const dispatch = useDispatch()\r\n    const conversationList = useSelector(state => state.chat.conversationList)\r\n    const idConversation = useSelector(state => state.chat.idConversation)\r\n\r\n    if(conversationList){\r\n    }\r\n    useEffect(() => {\r\n        dispatch(getAllConversationList())\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if(conversationList){\r\n            dispatch(updateIdConversation(conversationList[0]))\r\n        }\r\n    }, [conversationList])\r\n\r\n    // useEffect(() => {\r\n    //     dispatch(SeenConversation(idConversation))\r\n    // }, [idConversation])\r\n\r\n    useEffect(() => {\r\n        socket = io(ENDPOINT)\r\n\r\n        socket.on('lastMessage', async data => {\r\n            await dispatch(updateLastMessageConversation(data))\r\n            dispatch(getAllConversationList())\r\n        })\r\n\r\n        socket.on('show-me', data => {\r\n            dispatch(showConversation(data))\r\n        })\r\n\r\n        return () => socket.disconnect()\r\n    }, [])\r\n\r\n    const onConversationClick = (conversation) => {\r\n        dispatch(updateIdConversation(conversation))\r\n    }\r\n    return (\r\n        <div className=\"contact\">\r\n            {\r\n                conversationList ? (<ListConversation conversationList={conversationList} onConversationClick={onConversationClick}></ListConversation>) : ''\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Contact;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAAQC,WAAW,EAAEC,WAAW,QAAO,aAAa;AACpD,SAASC,sBAAsB,EAAEC,gBAAgB,EAAEC,oBAAoB,EAAEC,6BAA6B,QAAQ,mCAAmC;AACjJ,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAOC,EAAE,MAAM,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEjC,SAASC,OAAOA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACpB,IAAIC,MAAM;EACV,MAAMC,QAAQ,GAAG,gBAAgB;EACjC,MAAMC,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAMgB,gBAAgB,GAAGf,WAAW,CAACgB,KAAK,IAAIA,KAAK,CAACC,IAAI,CAACF,gBAAgB,CAAC;EAC1E,MAAMG,cAAc,GAAGlB,WAAW,CAACgB,KAAK,IAAIA,KAAK,CAACC,IAAI,CAACC,cAAc,CAAC;EAEtE,IAAGH,gBAAgB,EAAC,CACpB;EACAjB,SAAS,CAAC,MAAM;IACZgB,QAAQ,CAACb,sBAAsB,CAAC,CAAC,CAAC;EACtC,CAAC,EAAE,EAAE,CAAC;EAENH,SAAS,CAAC,MAAM;IACZ,IAAGiB,gBAAgB,EAAC;MAChBD,QAAQ,CAACX,oBAAoB,CAACY,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC;IACvD;EACJ,CAAC,EAAE,CAACA,gBAAgB,CAAC,CAAC;;EAEtB;EACA;EACA;;EAEAjB,SAAS,CAAC,MAAM;IACZc,MAAM,GAAGN,EAAE,CAACO,QAAQ,CAAC;IAErBD,MAAM,CAACO,EAAE,CAAC,aAAa,EAAE,MAAMC,IAAI,IAAI;MACnC,MAAMN,QAAQ,CAACV,6BAA6B,CAACgB,IAAI,CAAC,CAAC;MACnDN,QAAQ,CAACb,sBAAsB,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC;IAEFW,MAAM,CAACO,EAAE,CAAC,SAAS,EAAEC,IAAI,IAAI;MACzBN,QAAQ,CAACZ,gBAAgB,CAACkB,IAAI,CAAC,CAAC;IACpC,CAAC,CAAC;IAEF,OAAO,MAAMR,MAAM,CAACS,UAAU,CAAC,CAAC;EACpC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,mBAAmB,GAAIC,YAAY,IAAK;IAC1CT,QAAQ,CAACX,oBAAoB,CAACoB,YAAY,CAAC,CAAC;EAChD,CAAC;EACD,oBACIf,OAAA;IAAKgB,SAAS,EAAC,SAAS;IAAAC,QAAA,EAEhBV,gBAAgB,gBAAIP,OAAA,CAACH,gBAAgB;MAACU,gBAAgB,EAAEA,gBAAiB;MAACO,mBAAmB,EAAEA;IAAoB;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAmB,CAAC,GAAI;EAAE;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEhJ,CAAC;AAEd;AAAClB,EAAA,CAhDQF,OAAO;EAAA,QAGKV,WAAW,EACHC,WAAW,EACbA,WAAW;AAAA;AAAA8B,EAAA,GAL7BrB,OAAO;AAkDhB,eAAeA,OAAO;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}