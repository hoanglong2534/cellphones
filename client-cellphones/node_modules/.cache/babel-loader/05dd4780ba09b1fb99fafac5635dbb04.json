{"ast":null,"code":"import React,{useEffect,useMemo}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import('@google/model-viewer');function isIOS(){if(typeof navigator==='undefined')return false;return /iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==='MacIntel'&&navigator.maxTouchPoints>1;}export default function ModelViewerAR(_ref){let{src,iosSrc,poster,alt='3D model',arScale='auto',arPlacement='floor'}=_ref;// Best-effort choose poster\nconst posterUrl=poster||undefined;const computedIosSrc=useMemo(()=>{if(iosSrc)return iosSrc;// .usdz if provided\n// If a .usdz isn't provided, fallback will still allow non-AR viewing on iOS\nreturn undefined;},[iosSrc]);useEffect(()=>{// No-op: ensures side-effect import executed once\n},[]);// model-viewer attributes\n// - ar: enables AR (Scene Viewer on Android, Quick Look on iOS)\n// - camera-controls, autoplay: basic UX\n// - exposure, shadow-intensity: nicer visuals\nreturn/*#__PURE__*/_jsx(\"model-viewer\",{src:src,\"ios-src\":computedIosSrc,alt:alt,ar:true,\"ar-modes\":\"scene-viewer webxr quick-look\",\"ar-scale\":arScale,\"ar-placement\":arPlacement,\"camera-controls\":true,autoplay:true,\"shadow-intensity\":\"0.8\",exposure:\"0.9\",style:{width:'100%',height:420,background:'#111',borderRadius:12,overflow:'hidden',border:'1px solid #333'},poster:posterUrl,children:isIOS()&&!computedIosSrc?/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:8,left:8,right:8,color:'#fff',fontSize:12,opacity:0.8},children:\"\\u0110\\u1EC3 b\\u1EADt AR tr\\xEAn iOS, cung c\\u1EA5p t\\u1EC7p .usdz qua prop iosSrc.\"}):null});}","map":{"version":3,"names":["React","useEffect","useMemo","jsx","_jsx","isIOS","navigator","test","userAgent","platform","maxTouchPoints","ModelViewerAR","_ref","src","iosSrc","poster","alt","arScale","arPlacement","posterUrl","undefined","computedIosSrc","ar","autoplay","exposure","style","width","height","background","borderRadius","overflow","border","children","position","bottom","left","right","color","fontSize","opacity"],"sources":["C:/Users/admin/Download/project-long/cellphones/client-cellphones/src/components/ARViewer/ModelViewerAR.js"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\r\nimport('@google/model-viewer');\r\n\r\nfunction isIOS() {\r\n    if (typeof navigator === 'undefined') return false;\r\n    return /iPad|iPhone|iPod/.test(navigator.userAgent) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\r\n}\r\n\r\nexport default function ModelViewerAR({ src, iosSrc, poster, alt = '3D model', arScale = 'auto', arPlacement = 'floor' }) {\r\n    // Best-effort choose poster\r\n    const posterUrl = poster || undefined;\r\n\r\n    const computedIosSrc = useMemo(() => {\r\n        if (iosSrc) return iosSrc; // .usdz if provided\r\n        // If a .usdz isn't provided, fallback will still allow non-AR viewing on iOS\r\n        return undefined;\r\n    }, [iosSrc]);\r\n\r\n    useEffect(() => {\r\n        // No-op: ensures side-effect import executed once\r\n    }, []);\r\n\r\n    // model-viewer attributes\r\n    // - ar: enables AR (Scene Viewer on Android, Quick Look on iOS)\r\n    // - camera-controls, autoplay: basic UX\r\n    // - exposure, shadow-intensity: nicer visuals\r\n    return (\r\n        <model-viewer\r\n            src={src}\r\n            ios-src={computedIosSrc}\r\n            alt={alt}\r\n            ar\r\n            ar-modes=\"scene-viewer webxr quick-look\"\r\n            ar-scale={arScale}\r\n            ar-placement={arPlacement}\r\n            camera-controls\r\n            autoplay\r\n            shadow-intensity=\"0.8\"\r\n            exposure=\"0.9\"\r\n            style={{ width: '100%', height: 420, background: '#111', borderRadius: 12, overflow: 'hidden', border: '1px solid #333' }}\r\n            poster={posterUrl}\r\n        >\r\n            {/* Fallback info for iOS without USDZ */}\r\n            {isIOS() && !computedIosSrc ? (\r\n                <div style={{ position: 'absolute', bottom: 8, left: 8, right: 8, color: '#fff', fontSize: 12, opacity: 0.8 }}>\r\n                    Để bật AR trên iOS, cung cấp tệp .usdz qua prop iosSrc.\r\n                </div>\r\n            ) : null}\r\n        </model-viewer>\r\n    );\r\n}\r\n\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,OAAO,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAClD,MAAM,CAAC,sBAAsB,CAAC,CAE9B,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACb,GAAI,MAAO,CAAAC,SAAS,GAAK,WAAW,CAAE,MAAO,MAAK,CAClD,MAAO,mBAAkB,CAACC,IAAI,CAACD,SAAS,CAACE,SAAS,CAAC,EAAKF,SAAS,CAACG,QAAQ,GAAK,UAAU,EAAIH,SAAS,CAACI,cAAc,CAAG,CAAE,CAC9H,CAEA,cAAe,SAAS,CAAAC,aAAaA,CAAAC,IAAA,CAAqF,IAApF,CAAEC,GAAG,CAAEC,MAAM,CAAEC,MAAM,CAAEC,GAAG,CAAG,UAAU,CAAEC,OAAO,CAAG,MAAM,CAAEC,WAAW,CAAG,OAAQ,CAAC,CAAAN,IAAA,CACpH;AACA,KAAM,CAAAO,SAAS,CAAGJ,MAAM,EAAIK,SAAS,CAErC,KAAM,CAAAC,cAAc,CAAGnB,OAAO,CAAC,IAAM,CACjC,GAAIY,MAAM,CAAE,MAAO,CAAAA,MAAM,CAAE;AAC3B;AACA,MAAO,CAAAM,SAAS,CACpB,CAAC,CAAE,CAACN,MAAM,CAAC,CAAC,CAEZb,SAAS,CAAC,IAAM,CACZ;AAAA,CACH,CAAE,EAAE,CAAC,CAEN;AACA;AACA;AACA;AACA,mBACIG,IAAA,iBACIS,GAAG,CAAEA,GAAI,CACT,UAASQ,cAAe,CACxBL,GAAG,CAAEA,GAAI,CACTM,EAAE,MACF,WAAS,+BAA+B,CACxC,WAAUL,OAAQ,CAClB,eAAcC,WAAY,CAC1B,sBAAe,CACfK,QAAQ,MACR,mBAAiB,KAAK,CACtBC,QAAQ,CAAC,KAAK,CACdC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,GAAG,CAAEC,UAAU,CAAE,MAAM,CAAEC,YAAY,CAAE,EAAE,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,MAAM,CAAE,gBAAiB,CAAE,CAC1HhB,MAAM,CAAEI,SAAU,CAAAa,QAAA,CAGjB3B,KAAK,CAAC,CAAC,EAAI,CAACgB,cAAc,cACvBjB,IAAA,QAAKqB,KAAK,CAAE,CAAEQ,QAAQ,CAAE,UAAU,CAAEC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,CAAC,CAAEC,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,MAAM,CAAEC,QAAQ,CAAE,EAAE,CAAEC,OAAO,CAAE,GAAI,CAAE,CAAAP,QAAA,CAAC,qFAE/G,CAAK,CAAC,CACN,IAAI,CACE,CAAC,CAEvB","ignoreList":[]},"metadata":{},"sourceType":"module"}