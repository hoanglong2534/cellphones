{"ast":null,"code":"import _regeneratorRuntime from \"D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/client-cellphones/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/client-cellphones/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/client-cellphones/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\STUDY\\\\PTIT\\\\NAM_4\\\\KI_1\\\\LT_WEB\\\\BTL_GiuaKy\\\\client-cellphones\\\\src\\\\components\\\\ARViewer\\\\ARViewer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport './ARViewer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ARViewer(_ref) {\n  _s();\n\n  var _this = this;\n\n  var product = _ref.product;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isARMode = _useState2[0],\n      setIsARMode = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isVRMode = _useState4[0],\n      setIsVRMode = _useState4[1];\n\n  var _useState5 = useState('exterior'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentView = _useState6[0],\n      setCurrentView = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var canvasRef = useRef(null);\n  var videoRef = useRef(null);\n  var animationRef = useRef(null); // Lấy thông tin sản phẩm thực tế từ props\n\n  var getProductComponents = function getProductComponents(product) {\n    if (!product) return modelData[currentView]; // Tạo components dựa trên thông tin sản phẩm thực tế\n\n    var baseComponents = {\n      exterior: [{\n        name: 'Màn hình',\n        color: '#000000',\n        position: {\n          x: 0,\n          y: 0,\n          z: 0\n        },\n        size: 40\n      }, {\n        name: 'Khung máy',\n        color: '#C0C0C0',\n        position: {\n          x: 0,\n          y: 0,\n          z: -1\n        },\n        size: 35\n      }, {\n        name: 'Camera',\n        color: '#FF0000',\n        position: {\n          x: 0,\n          y: 0.5,\n          z: 0.5\n        },\n        size: 15\n      }, {\n        name: 'Nút nguồn',\n        color: '#808080',\n        position: {\n          x: 0.3,\n          y: 0,\n          z: 0\n        },\n        size: 10\n      }, {\n        name: 'Speaker',\n        color: '#333333',\n        position: {\n          x: -0.3,\n          y: 0,\n          z: 0\n        },\n        size: 12\n      }],\n      interior: [{\n        name: 'CPU',\n        color: '#00FF00',\n        position: {\n          x: 0,\n          y: 0,\n          z: 0\n        },\n        size: 25\n      }, {\n        name: 'RAM',\n        color: '#0000FF',\n        position: {\n          x: 0.2,\n          y: 0,\n          z: 0\n        },\n        size: 20\n      }, {\n        name: 'Storage',\n        color: '#FFFF00',\n        position: {\n          x: -0.2,\n          y: 0,\n          z: 0\n        },\n        size: 18\n      }, {\n        name: 'Battery',\n        color: '#FF00FF',\n        position: {\n          x: 0,\n          y: -0.3,\n          z: 0\n        },\n        size: 30\n      }, {\n        name: 'Motherboard',\n        color: '#00FFFF',\n        position: {\n          x: 0,\n          y: 0,\n          z: -0.1\n        },\n        size: 35\n      }],\n      exploded: [{\n        name: 'Screen Assembly',\n        color: '#000000',\n        position: {\n          x: 0,\n          y: 0.5,\n          z: 0\n        },\n        size: 45\n      }, {\n        name: 'Main Board',\n        color: '#00FF00',\n        position: {\n          x: 0,\n          y: 0,\n          z: 0\n        },\n        size: 40\n      }, {\n        name: 'Battery Pack',\n        color: '#FF00FF',\n        position: {\n          x: 0,\n          y: -0.5,\n          z: 0\n        },\n        size: 35\n      }, {\n        name: 'Camera Module',\n        color: '#FF0000',\n        position: {\n          x: 0.3,\n          y: 0.3,\n          z: 0.3\n        },\n        size: 15\n      }, {\n        name: 'Speaker',\n        color: '#808080',\n        position: {\n          x: -0.3,\n          y: 0.3,\n          z: 0.3\n        },\n        size: 12\n      }]\n    };\n    return {\n      name: \"\".concat(currentView === 'exterior' ? 'Exterior' : currentView === 'interior' ? 'Interior' : 'Exploded', \" View\"),\n      description: \"Xem \".concat(currentView === 'exterior' ? 'bên ngoài' : currentView === 'interior' ? 'bên trong' : 'các bộ phận tách rời', \" c\\u1EE7a \").concat(product.name),\n      components: baseComponents[currentView]\n    };\n  };\n\n  var currentModelData = getProductComponents(product);\n\n  var startAR = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var stream;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              setError('');\n              _context.prev = 2;\n\n              if (!(!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia)) {\n                _context.next = 5;\n                break;\n              }\n\n              throw new Error('Camera không được hỗ trợ trên trình duyệt này');\n\n            case 5:\n              _context.next = 7;\n              return navigator.mediaDevices.getUserMedia({\n                video: {\n                  facingMode: 'environment',\n                  width: {\n                    ideal: 1280\n                  },\n                  height: {\n                    ideal: 720\n                  }\n                }\n              });\n\n            case 7:\n              stream = _context.sent;\n\n              if (videoRef.current) {\n                videoRef.current.srcObject = stream;\n                videoRef.current.play();\n              }\n\n              setIsARMode(true);\n              setIsVRMode(false);\n              startAnimation();\n              _context.next = 18;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](2);\n              console.error('Error accessing camera:', _context.t0);\n              setError(\"Kh\\xF4ng th\\u1EC3 truy c\\u1EADp camera: \".concat(_context.t0.message));\n\n            case 18:\n              setIsLoading(false);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 14]]);\n    }));\n\n    return function startAR() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var startVR = function startVR() {\n    setIsVRMode(true);\n    setIsARMode(false);\n    setError(''); // Check WebXR support\n\n    if ('xr' in navigator) {\n      navigator.xr.isSessionSupported('immersive-vr').then(function (supported) {\n        if (supported) {\n          console.log('VR được hỗ trợ');\n        } else {\n          setError('VR không được hỗ trợ trên thiết bị này');\n        }\n      }).catch(function () {\n        setError('Không thể kiểm tra hỗ trợ VR');\n      });\n    } else {\n      setError('WebXR không được hỗ trợ');\n    }\n\n    startAnimation();\n  };\n\n  var exitARVR = function exitARVR() {\n    setIsARMode(false);\n    setIsVRMode(false);\n    setError(''); // Stop camera stream\n\n    if (videoRef.current && videoRef.current.srcObject) {\n      var tracks = videoRef.current.srcObject.getTracks();\n      tracks.forEach(function (track) {\n        return track.stop();\n      });\n      videoRef.current.srcObject = null;\n    } // Stop animation\n\n\n    if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n    }\n  };\n\n  var startAnimation = function startAnimation() {\n    var animate = function animate() {\n      render3DModel();\n      animationRef.current = requestAnimationFrame(animate);\n    };\n\n    animate();\n  };\n\n  var render3DModel = function render3DModel() {\n    var canvas = canvasRef.current;\n    if (!canvas) return;\n    var ctx = canvas.getContext('2d');\n    var width = canvas.width,\n        height = canvas.height; // Clear canvas\n\n    ctx.clearRect(0, 0, width, height); // Draw 3D model components with animation\n\n    var currentModel = modelData[currentView];\n    var time = Date.now() * 0.001;\n    currentModel.components.forEach(function (component, index) {\n      var x = width / 2 + component.position.x * 100;\n      var y = height / 2 + component.position.y * 100; // Add floating animation\n\n      var floatY = y + Math.sin(time + index) * 5;\n      var size = component.size + Math.sin(time * 2 + index) * 3; // Draw component with gradient\n\n      var gradient = ctx.createRadialGradient(x, floatY, 0, x, floatY, size);\n      gradient.addColorStop(0, component.color);\n      gradient.addColorStop(1, adjustColor(component.color, -30));\n      ctx.fillStyle = gradient;\n      ctx.beginPath();\n      ctx.arc(x, floatY, size, 0, 2 * Math.PI);\n      ctx.fill(); // Add border\n\n      ctx.strokeStyle = adjustColor(component.color, 20);\n      ctx.lineWidth = 2;\n      ctx.stroke(); // Draw component name with background\n\n      ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n      ctx.fillRect(x - 40, floatY + size + 5, 80, 20);\n      ctx.fillStyle = '#fff';\n      ctx.font = '12px Arial';\n      ctx.textAlign = 'center';\n      ctx.fillText(component.name, x, floatY + size + 18);\n    }); // Add connection lines for exploded view\n\n    if (currentView === 'exploded') {\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\n      ctx.lineWidth = 1;\n      ctx.setLineDash([5, 5]);\n      var centerX = width / 2;\n      var centerY = height / 2;\n      currentModel.components.forEach(function (component) {\n        var x = centerX + component.position.x * 100;\n        var y = centerY + component.position.y * 100;\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY);\n        ctx.lineTo(x, y);\n        ctx.stroke();\n      });\n      ctx.setLineDash([]);\n    }\n  }; // Helper function to adjust color brightness\n\n\n  var adjustColor = function adjustColor(color, amount) {\n    var num = parseInt(color.replace(\"#\", \"\"), 16);\n    var r = Math.max(0, Math.min(255, (num >> 16) + amount));\n    var g = Math.max(0, Math.min(255, (num >> 8 & 0x00FF) + amount));\n    var b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));\n    return \"#\".concat((r << 16 | g << 8 | b).toString(16).padStart(6, '0'));\n  };\n\n  useEffect(function () {\n    if (isARMode || isVRMode) {\n      startAnimation();\n    }\n\n    return function () {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [isARMode, isVRMode, currentView]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ar-viewer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ar-viewer-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"AR/VR Viewer - \", (product === null || product === void 0 ? void 0 : product.name) || 'Sản phẩm']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Xem c\\u1EA5u tr\\xFAc thi\\u1EBFt b\\u1ECB v\\u1EDBi c\\xF4ng ngh\\u1EC7 AR/VR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"error-icon\",\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }, this), !isARMode && !isVRMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ar-viewer-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"view-modes\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Ch\\u1ECDn ch\\u1EBF \\u0111\\u1ED9 xem:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mode-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mode-btn \".concat(currentView === 'exterior' ? 'active' : ''),\n            onClick: function onClick() {\n              return setCurrentView('exterior');\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mode-icon\",\n              children: \"\\uD83D\\uDCF1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 33\n            }, this), \"B\\xEAn ngo\\xE0i\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mode-btn \".concat(currentView === 'interior' ? 'active' : ''),\n            onClick: function onClick() {\n              return setCurrentView('interior');\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mode-icon\",\n              children: \"\\uD83D\\uDD27\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 33\n            }, this), \"B\\xEAn trong\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mode-btn \".concat(currentView === 'exploded' ? 'active' : ''),\n            onClick: function onClick() {\n              return setCurrentView('exploded');\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mode-icon\",\n              children: \"\\uD83D\\uDCA5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 33\n            }, this), \"T\\xE1ch r\\u1EDDi\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ar-vr-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ar-btn\",\n          onClick: startAR,\n          disabled: isLoading,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn-icon\",\n            children: \"\\uD83D\\uDCF7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 29\n          }, this), isLoading ? 'Đang khởi tạo...' : 'Bắt đầu AR']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"vr-btn\",\n          onClick: startVR,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn-icon\",\n            children: \"\\uD83E\\uDD7D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this), \"B\\u1EAFt \\u0111\\u1EA7u VR\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"model-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: modelData[currentView].name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: modelData[currentView].description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"components-list\",\n          children: modelData[currentView].components.map(function (component, index) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"component-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"component-color\",\n                style: {\n                  backgroundColor: component.color\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 37\n              }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: component.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 37\n              }, _this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 33\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ar-vr-viewport\",\n      children: [isARMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ar-viewport\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          autoPlay: true,\n          playsInline: true,\n          muted: true,\n          className: \"camera-feed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"ar-overlay\",\n          width: 640,\n          height: 480\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 25\n      }, this), isVRMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vr-viewport\",\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"vr-canvas\",\n          width: 800,\n          height: 600\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ar-vr-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"view-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn \".concat(currentView === 'exterior' ? 'active' : ''),\n            onClick: function onClick() {\n              return setCurrentView('exterior');\n            },\n            children: \"\\uD83D\\uDCF1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn \".concat(currentView === 'interior' ? 'active' : ''),\n            onClick: function onClick() {\n              return setCurrentView('interior');\n            },\n            children: \"\\uD83D\\uDD27\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"control-btn \".concat(currentView === 'exploded' ? 'active' : ''),\n            onClick: function onClick() {\n              return setCurrentView('exploded');\n            },\n            children: \"\\uD83D\\uDCA5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"exit-btn\",\n          onClick: exitARVR,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn-icon\",\n            children: \"\\u274C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 29\n          }, this), \"Tho\\xE1t\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ar-vr-instructions\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"H\\u01B0\\u1EDBng d\\u1EABn s\\u1EED d\\u1EE5ng:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Di chuy\\u1EC3n thi\\u1EBFt b\\u1ECB \\u0111\\u1EC3 xem c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Ch\\u1EA1m v\\xE0o c\\xE1c b\\u1ED9 ph\\u1EADn \\u0111\\u1EC3 xem th\\xF4ng tin chi ti\\u1EBFt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"S\\u1EED d\\u1EE5ng c\\xE1c n\\xFAt \\u0111\\u1EC3 chuy\\u1EC3n \\u0111\\u1ED5i ch\\u1EBF \\u0111\\u1ED9 xem\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 17\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0110ang kh\\u1EDFi t\\u1EA1o AR...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ARViewer, \"vKyt5w0WNehiYeDkFc32glO86Fw=\");\n\n_c = ARViewer;\nexport default ARViewer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ARViewer\");","map":{"version":3,"sources":["D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/client-cellphones/src/components/ARViewer/ARViewer.js"],"names":["React","useState","useRef","useEffect","ARViewer","product","isARMode","setIsARMode","isVRMode","setIsVRMode","currentView","setCurrentView","isLoading","setIsLoading","error","setError","canvasRef","videoRef","animationRef","getProductComponents","modelData","baseComponents","exterior","name","color","position","x","y","z","size","interior","exploded","description","components","currentModelData","startAR","navigator","mediaDevices","getUserMedia","Error","video","facingMode","width","ideal","height","stream","current","srcObject","play","startAnimation","console","message","startVR","xr","isSessionSupported","then","supported","log","catch","exitARVR","tracks","getTracks","forEach","track","stop","cancelAnimationFrame","animate","render3DModel","requestAnimationFrame","canvas","ctx","getContext","clearRect","currentModel","time","Date","now","component","index","floatY","Math","sin","gradient","createRadialGradient","addColorStop","adjustColor","fillStyle","beginPath","arc","PI","fill","strokeStyle","lineWidth","stroke","fillRect","font","textAlign","fillText","setLineDash","centerX","centerY","moveTo","lineTo","amount","num","parseInt","replace","r","max","min","g","b","toString","padStart","map","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './ARViewer.css';\r\n\r\nfunction ARViewer({ product }) {\r\n    const [isARMode, setIsARMode] = useState(false);\r\n    const [isVRMode, setIsVRMode] = useState(false);\r\n    const [currentView, setCurrentView] = useState('exterior');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const canvasRef = useRef(null);\r\n    const videoRef = useRef(null);\r\n    const animationRef = useRef(null);\r\n\r\n    // Lấy thông tin sản phẩm thực tế từ props\r\n    const getProductComponents = (product) => {\r\n        if (!product) return modelData[currentView];\r\n        \r\n        // Tạo components dựa trên thông tin sản phẩm thực tế\r\n        const baseComponents = {\r\n            exterior: [\r\n                { name: 'Màn hình', color: '#000000', position: { x: 0, y: 0, z: 0 }, size: 40 },\r\n                { name: 'Khung máy', color: '#C0C0C0', position: { x: 0, y: 0, z: -1 }, size: 35 },\r\n                { name: 'Camera', color: '#FF0000', position: { x: 0, y: 0.5, z: 0.5 }, size: 15 },\r\n                { name: 'Nút nguồn', color: '#808080', position: { x: 0.3, y: 0, z: 0 }, size: 10 },\r\n                { name: 'Speaker', color: '#333333', position: { x: -0.3, y: 0, z: 0 }, size: 12 }\r\n            ],\r\n            interior: [\r\n                { name: 'CPU', color: '#00FF00', position: { x: 0, y: 0, z: 0 }, size: 25 },\r\n                { name: 'RAM', color: '#0000FF', position: { x: 0.2, y: 0, z: 0 }, size: 20 },\r\n                { name: 'Storage', color: '#FFFF00', position: { x: -0.2, y: 0, z: 0 }, size: 18 },\r\n                { name: 'Battery', color: '#FF00FF', position: { x: 0, y: -0.3, z: 0 }, size: 30 },\r\n                { name: 'Motherboard', color: '#00FFFF', position: { x: 0, y: 0, z: -0.1 }, size: 35 }\r\n            ],\r\n            exploded: [\r\n                { name: 'Screen Assembly', color: '#000000', position: { x: 0, y: 0.5, z: 0 }, size: 45 },\r\n                { name: 'Main Board', color: '#00FF00', position: { x: 0, y: 0, z: 0 }, size: 40 },\r\n                { name: 'Battery Pack', color: '#FF00FF', position: { x: 0, y: -0.5, z: 0 }, size: 35 },\r\n                { name: 'Camera Module', color: '#FF0000', position: { x: 0.3, y: 0.3, z: 0.3 }, size: 15 },\r\n                { name: 'Speaker', color: '#808080', position: { x: -0.3, y: 0.3, z: 0.3 }, size: 12 }\r\n            ]\r\n        };\r\n        \r\n        return {\r\n            name: `${currentView === 'exterior' ? 'Exterior' : currentView === 'interior' ? 'Interior' : 'Exploded'} View`,\r\n            description: `Xem ${currentView === 'exterior' ? 'bên ngoài' : currentView === 'interior' ? 'bên trong' : 'các bộ phận tách rời'} của ${product.name}`,\r\n            components: baseComponents[currentView]\r\n        };\r\n    };\r\n\r\n    const currentModelData = getProductComponents(product);\r\n\r\n    const startAR = async () => {\r\n        setIsLoading(true);\r\n        setError('');\r\n        try {\r\n            // Check if getUserMedia is supported\r\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n                throw new Error('Camera không được hỗ trợ trên trình duyệt này');\r\n            }\r\n\r\n            // Request camera permission\r\n            const stream = await navigator.mediaDevices.getUserMedia({ \r\n                video: { \r\n                    facingMode: 'environment',\r\n                    width: { ideal: 1280 },\r\n                    height: { ideal: 720 }\r\n                } \r\n            });\r\n            \r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = stream;\r\n                videoRef.current.play();\r\n            }\r\n            \r\n            setIsARMode(true);\r\n            setIsVRMode(false);\r\n            startAnimation();\r\n        } catch (error) {\r\n            console.error('Error accessing camera:', error);\r\n            setError(`Không thể truy cập camera: ${error.message}`);\r\n        }\r\n        setIsLoading(false);\r\n    };\r\n\r\n    const startVR = () => {\r\n        setIsVRMode(true);\r\n        setIsARMode(false);\r\n        setError('');\r\n        \r\n        // Check WebXR support\r\n        if ('xr' in navigator) {\r\n            navigator.xr.isSessionSupported('immersive-vr').then((supported) => {\r\n                if (supported) {\r\n                    console.log('VR được hỗ trợ');\r\n                } else {\r\n                    setError('VR không được hỗ trợ trên thiết bị này');\r\n                }\r\n            }).catch(() => {\r\n                setError('Không thể kiểm tra hỗ trợ VR');\r\n            });\r\n        } else {\r\n            setError('WebXR không được hỗ trợ');\r\n        }\r\n        \r\n        startAnimation();\r\n    };\r\n\r\n    const exitARVR = () => {\r\n        setIsARMode(false);\r\n        setIsVRMode(false);\r\n        setError('');\r\n        \r\n        // Stop camera stream\r\n        if (videoRef.current && videoRef.current.srcObject) {\r\n            const tracks = videoRef.current.srcObject.getTracks();\r\n            tracks.forEach(track => track.stop());\r\n            videoRef.current.srcObject = null;\r\n        }\r\n        \r\n        // Stop animation\r\n        if (animationRef.current) {\r\n            cancelAnimationFrame(animationRef.current);\r\n        }\r\n    };\r\n\r\n    const startAnimation = () => {\r\n        const animate = () => {\r\n            render3DModel();\r\n            animationRef.current = requestAnimationFrame(animate);\r\n        };\r\n        animate();\r\n    };\r\n\r\n    const render3DModel = () => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        const { width, height } = canvas;\r\n        \r\n        // Clear canvas\r\n        ctx.clearRect(0, 0, width, height);\r\n        \r\n        // Draw 3D model components with animation\r\n        const currentModel = modelData[currentView];\r\n        const time = Date.now() * 0.001;\r\n        \r\n        currentModel.components.forEach((component, index) => {\r\n            const x = width / 2 + component.position.x * 100;\r\n            const y = height / 2 + component.position.y * 100;\r\n            \r\n            // Add floating animation\r\n            const floatY = y + Math.sin(time + index) * 5;\r\n            const size = component.size + Math.sin(time * 2 + index) * 3;\r\n            \r\n            // Draw component with gradient\r\n            const gradient = ctx.createRadialGradient(x, floatY, 0, x, floatY, size);\r\n            gradient.addColorStop(0, component.color);\r\n            gradient.addColorStop(1, adjustColor(component.color, -30));\r\n            \r\n            ctx.fillStyle = gradient;\r\n            ctx.beginPath();\r\n            ctx.arc(x, floatY, size, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n            \r\n            // Add border\r\n            ctx.strokeStyle = adjustColor(component.color, 20);\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n            \r\n            // Draw component name with background\r\n            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\r\n            ctx.fillRect(x - 40, floatY + size + 5, 80, 20);\r\n            \r\n            ctx.fillStyle = '#fff';\r\n            ctx.font = '12px Arial';\r\n            ctx.textAlign = 'center';\r\n            ctx.fillText(component.name, x, floatY + size + 18);\r\n        });\r\n        \r\n        // Add connection lines for exploded view\r\n        if (currentView === 'exploded') {\r\n            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\r\n            ctx.lineWidth = 1;\r\n            ctx.setLineDash([5, 5]);\r\n            \r\n            const centerX = width / 2;\r\n            const centerY = height / 2;\r\n            \r\n            currentModel.components.forEach(component => {\r\n                const x = centerX + component.position.x * 100;\r\n                const y = centerY + component.position.y * 100;\r\n                \r\n                ctx.beginPath();\r\n                ctx.moveTo(centerX, centerY);\r\n                ctx.lineTo(x, y);\r\n                ctx.stroke();\r\n            });\r\n            \r\n            ctx.setLineDash([]);\r\n        }\r\n    };\r\n\r\n    // Helper function to adjust color brightness\r\n    const adjustColor = (color, amount) => {\r\n        const num = parseInt(color.replace(\"#\", \"\"), 16);\r\n        const r = Math.max(0, Math.min(255, (num >> 16) + amount));\r\n        const g = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amount));\r\n        const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));\r\n        return `#${((r << 16) | (g << 8) | b).toString(16).padStart(6, '0')}`;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isARMode || isVRMode) {\r\n            startAnimation();\r\n        }\r\n        \r\n        return () => {\r\n            if (animationRef.current) {\r\n                cancelAnimationFrame(animationRef.current);\r\n            }\r\n        };\r\n    }, [isARMode, isVRMode, currentView]);\r\n\r\n    return (\r\n        <div className=\"ar-viewer\">\r\n            <div className=\"ar-viewer-header\">\r\n                <h2>AR/VR Viewer - {product?.name || 'Sản phẩm'}</h2>\r\n                <p>Xem cấu trúc thiết bị với công nghệ AR/VR</p>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"error-message\">\r\n                    <span className=\"error-icon\">⚠️</span>\r\n                    <span>{error}</span>\r\n                </div>\r\n            )}\r\n\r\n            {!isARMode && !isVRMode ? (\r\n                <div className=\"ar-viewer-controls\">\r\n                    <div className=\"view-modes\">\r\n                        <h3>Chọn chế độ xem:</h3>\r\n                        <div className=\"mode-buttons\">\r\n                            <button \r\n                                className={`mode-btn ${currentView === 'exterior' ? 'active' : ''}`}\r\n                                onClick={() => setCurrentView('exterior')}\r\n                            >\r\n                                <span className=\"mode-icon\">📱</span>\r\n                                Bên ngoài\r\n                            </button>\r\n                            <button \r\n                                className={`mode-btn ${currentView === 'interior' ? 'active' : ''}`}\r\n                                onClick={() => setCurrentView('interior')}\r\n                            >\r\n                                <span className=\"mode-icon\">🔧</span>\r\n                                Bên trong\r\n                            </button>\r\n                            <button \r\n                                className={`mode-btn ${currentView === 'exploded' ? 'active' : ''}`}\r\n                                onClick={() => setCurrentView('exploded')}\r\n                            >\r\n                                <span className=\"mode-icon\">💥</span>\r\n                                Tách rời\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"ar-vr-buttons\">\r\n                        <button \r\n                            className=\"ar-btn\"\r\n                            onClick={startAR}\r\n                            disabled={isLoading}\r\n                        >\r\n                            <span className=\"btn-icon\">📷</span>\r\n                            {isLoading ? 'Đang khởi tạo...' : 'Bắt đầu AR'}\r\n                        </button>\r\n                        <button \r\n                            className=\"vr-btn\"\r\n                            onClick={startVR}\r\n                        >\r\n                            <span className=\"btn-icon\">🥽</span>\r\n                            Bắt đầu VR\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"model-preview\">\r\n                        <h3>{modelData[currentView].name}</h3>\r\n                        <p>{modelData[currentView].description}</p>\r\n                        <div className=\"components-list\">\r\n                            {modelData[currentView].components.map((component, index) => (\r\n                                <div key={index} className=\"component-item\">\r\n                                    <div \r\n                                        className=\"component-color\" \r\n                                        style={{ backgroundColor: component.color }}\r\n                                    ></div>\r\n                                    <span>{component.name}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"ar-vr-viewport\">\r\n                    {isARMode && (\r\n                        <div className=\"ar-viewport\">\r\n                            <video \r\n                                ref={videoRef}\r\n                                autoPlay \r\n                                playsInline \r\n                                muted\r\n                                className=\"camera-feed\"\r\n                            />\r\n                            <canvas \r\n                                ref={canvasRef}\r\n                                className=\"ar-overlay\"\r\n                                width={640}\r\n                                height={480}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    \r\n                    {isVRMode && (\r\n                        <div className=\"vr-viewport\">\r\n                            <canvas \r\n                                ref={canvasRef}\r\n                                className=\"vr-canvas\"\r\n                                width={800}\r\n                                height={600}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"ar-vr-controls\">\r\n                        <div className=\"view-controls\">\r\n                            <button \r\n                                className={`control-btn ${currentView === 'exterior' ? 'active' : ''}`}\r\n                                onClick={() => setCurrentView('exterior')}\r\n                            >\r\n                                📱\r\n                            </button>\r\n                            <button \r\n                                className={`control-btn ${currentView === 'interior' ? 'active' : ''}`}\r\n                                onClick={() => setCurrentView('interior')}\r\n                            >\r\n                                🔧\r\n                            </button>\r\n                            <button \r\n                                className={`control-btn ${currentView === 'exploded' ? 'active' : ''}`}\r\n                                onClick={() => setCurrentView('exploded')}\r\n                            >\r\n                                💥\r\n                            </button>\r\n                        </div>\r\n                        \r\n                        <button className=\"exit-btn\" onClick={exitARVR}>\r\n                            <span className=\"btn-icon\">❌</span>\r\n                            Thoát\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"ar-vr-instructions\">\r\n                        <h4>Hướng dẫn sử dụng:</h4>\r\n                        <ul>\r\n                            <li>Di chuyển thiết bị để xem các góc độ khác nhau</li>\r\n                            <li>Chạm vào các bộ phận để xem thông tin chi tiết</li>\r\n                            <li>Sử dụng các nút để chuyển đổi chế độ xem</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {isLoading && (\r\n                <div className=\"loading-overlay\">\r\n                    <div className=\"loading-spinner\"></div>\r\n                    <p>Đang khởi tạo AR...</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ARViewer;\r\n"]},"metadata":{},"sourceType":"module"}