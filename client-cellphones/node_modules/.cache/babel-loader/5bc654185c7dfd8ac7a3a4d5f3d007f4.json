{"ast":null,"code":"import _objectSpread from\"C:/Users/admin/Download/project-long/cellphones/client-cellphones/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import axios from\"axios\";import{PayPalButton}from\"react-paypal-button-v2\";import{createOrder,payOrder}from\"../../actions/OrderAction\";import{useHistory}from\"react-router-dom\";import VnPay from\"./VnPay\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Payment(){const history=useHistory();const dispatch=useDispatch();const[sdkReady,setSdkReady]=useState(false);const[choosePay,setChoosePay]=useState({payLater:false,payOnline:false});const{order}=useSelector(state=>state.orderInfo);const payLater=()=>{setChoosePay({payOnline:false,payLater:true});};const payOnline=()=>{setChoosePay({payLater:false,payOnline:true});};const successPaymentHandler=async paymentResult=>{const OrderPaid=_objectSpread(_objectSpread({},order),{},{status:\"pendding\",paymentMethod:\"payOnline\",paymentResult:_objectSpread({},paymentResult)});await dispatch(createOrder(OrderPaid));history.push(\"/orderSuccess\");};const SendOrderPayLater=async()=>{const OrderPaid=_objectSpread(_objectSpread({},order),{},{status:\"pendding\",paymentMethod:\"payLater\"});await dispatch(createOrder(OrderPaid));history.push(\"/orderSuccess\");};useEffect(()=>{const addPayPalScript=async()=>{const{data}=await axios.get(\"http://localhost:4000/api/config/paypal\");const script=document.createElement(\"script\");script.type=\"text/javascript\";script.src=\"https://www.paypal.com/sdk/js?client-id=\".concat(data);script.async=true;script.onload=()=>{setSdkReady(true);};document.body.appendChild(script);addPayPalScript();};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"choose-pay\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"CH\\u1ECCN PH\\u01AF\\u01A0NG TH\\u1EE8C THANH TO\\xC1N \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"choose\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:choosePay.payLater?\"active\":\"\",onClick:()=>payLater(),children:\"Thanh to\\xE1n khi nh\\u1EADn h\\xE0ng\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:choosePay.payOnline?\"active\":\"\",onClick:()=>payOnline(),children:\"Thanh to\\xE1n Online\"})]}),choosePay.payLater?/*#__PURE__*/_jsx(\"div\",{className:\"customer-order\",children:/*#__PURE__*/_jsx(\"button\",{onClick:SendOrderPayLater,children:\"\\u0110\\u1EB7t H\\xE0ng\"})}):\"\",choosePay.payOnline?/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"paypal\",children:[/*#__PURE__*/_jsx(VnPay,{}),/*#__PURE__*/_jsx(PayPalButton,{className:\"paypal-btn\",style:{color:\"white\",marginTop:'1rem'},amount:1,onSuccess:successPaymentHandler})]}):\"\"]});}","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","axios","PayPalButton","createOrder","payOrder","useHistory","VnPay","jsx","_jsx","jsxs","_jsxs","Payment","history","dispatch","sdkReady","setSdkReady","choosePay","setChoosePay","payLater","payOnline","order","state","orderInfo","successPaymentHandler","paymentResult","OrderPaid","_objectSpread","status","paymentMethod","push","SendOrderPayLater","addPayPalScript","data","get","script","document","createElement","type","src","concat","async","onload","body","appendChild","className","children","onClick","style","color","marginTop","amount","onSuccess"],"sources":["C:/Users/admin/Download/project-long/cellphones/client-cellphones/src/components/order/Payment.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport { createOrder, payOrder } from \"../../actions/OrderAction\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport VnPay from \"./VnPay\";\r\n\r\nexport default function Payment() {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [sdkReady, setSdkReady] = useState(false);\r\n  const [choosePay, setChoosePay] = useState({\r\n    payLater: false,\r\n    payOnline: false,\r\n  });\r\n\r\n  const { order } = useSelector((state) => state.orderInfo);\r\n\r\n\r\n  const payLater = () => {\r\n    setChoosePay({ payOnline: false, payLater: true });\r\n  };\r\n\r\n  const payOnline = () => {\r\n    setChoosePay({ payLater: false, payOnline: true });\r\n  };\r\n\r\n  const successPaymentHandler = async (paymentResult) => {\r\n    const OrderPaid = {\r\n      ...order,\r\n      status: \"pendding\",\r\n      paymentMethod: \"payOnline\",\r\n      paymentResult: {...paymentResult},\r\n    };\r\n    await dispatch(createOrder(OrderPaid));\r\n    history.push(\"/orderSuccess\");\r\n  };\r\n\r\n  const SendOrderPayLater = async () => {\r\n    const OrderPaid = {\r\n      ...order,\r\n      status: \"pendding\",\r\n      paymentMethod: \"payLater\",\r\n    };\r\n\r\n    await dispatch(createOrder(OrderPaid))\r\n    history.push(\"/orderSuccess\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    const addPayPalScript = async () => {\r\n      const { data } = await axios.get(\r\n        \"http://localhost:4000/api/config/paypal\"\r\n      );\r\n      const script = document.createElement(\"script\");\r\n      script.type = \"text/javascript\";\r\n      script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\r\n      script.async = true;\r\n      script.onload = () => {\r\n        setSdkReady(true);\r\n      };\r\n      document.body.appendChild(script);\r\n\r\n      addPayPalScript();\r\n    };\r\n  }, []);\r\n  return (\r\n    <div className=\"choose-pay\">\r\n      <h4>CHỌN PHƯƠNG THỨC THANH TOÁN </h4>\r\n      <div className=\"choose\">\r\n        <button\r\n          type=\"submit\"\r\n          className={choosePay.payLater ? \"active\" : \"\"}\r\n          onClick={() => payLater()}\r\n        >\r\n          Thanh toán khi nhận hàng\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className={choosePay.payOnline ? \"active\" : \"\"}\r\n          onClick={() => payOnline()}\r\n        >\r\n          Thanh toán Online\r\n        </button>\r\n      </div>\r\n      {choosePay.payLater ? (\r\n        <div className=\"customer-order\">\r\n          <button onClick={SendOrderPayLater}>Đặt Hàng</button>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      {choosePay.payOnline ? (\r\n        <button type=\"submit\" className=\"paypal\">\r\n          \r\n          <VnPay></VnPay>\r\n          <PayPalButton\r\n            className=\"paypal-btn\"\r\n            style={{ color: \"white\", marginTop: '1rem' }}\r\n            amount={1}\r\n            onSuccess={successPaymentHandler}\r\n          ></PayPalButton>\r\n        </button>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}