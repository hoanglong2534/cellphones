{"ast":null,"code":"import _objectSpread from\"C:/Users/admin/Download/project-long/cellphones/client-cellphones/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useMemo,useRef,useState}from'react';import{Canvas,useFrame,useThree}from'@react-three/fiber';import*as THREE from'three';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SpinningBox(props){const meshRef=useRef();useFrame((_state,delta)=>{if(meshRef.current){meshRef.current.rotation.x+=delta*0.5;meshRef.current.rotation.y+=delta*0.8;}});return/*#__PURE__*/_jsxs(\"mesh\",_objectSpread(_objectSpread({ref:meshRef},props),{},{children:[/*#__PURE__*/_jsx(\"boxGeometry\",{args:[0.25,0.25,0.25]}),/*#__PURE__*/_jsx(\"meshStandardMaterial\",{color:\"#4CC3D9\"})]}));}function ProductModel(_ref){let{url,scale=0.5}=_ref;const groupRef=useRef();const[sceneObj,setSceneObj]=useState(null);const[error,setError]=useState('');useEffect(()=>{let cancelled=false;async function load(){try{const mod=await import('three/examples/jsm/loaders/GLTFLoader.js');const GLTFLoader=mod.GLTFLoader||mod.default;const loader=new GLTFLoader();loader.load(url,gltf=>{var _gltf$scenes;if(cancelled)return;const obj=gltf.scene||((_gltf$scenes=gltf.scenes)===null||_gltf$scenes===void 0?void 0:_gltf$scenes[0]);if(!obj){setError('Không thể đọc model');return;}// Center and scale roughly\nconst bbox=new THREE.Box3().setFromObject(obj);const size=new THREE.Vector3();bbox.getSize(size);const maxDim=Math.max(size.x,size.y,size.z)||1;const desired=scale;// meters\nconst s=desired/maxDim;obj.scale.setScalar(s);const center=new THREE.Vector3();bbox.getCenter(center);obj.position.sub(center.multiplyScalar(s));setSceneObj(obj);},undefined,()=>{if(!cancelled)setError('Lỗi khi tải model');});}catch(e){if(!cancelled)setError('Không tải được GLTFLoader');}}if(url)load();return()=>{cancelled=true;};},[url,scale]);if(error)return null;if(!sceneObj)return null;return/*#__PURE__*/_jsx(\"primitive\",{object:sceneObj});}export default function R3FXRViewer(_ref2){let{modelUrl}=_ref2;const[gl,setGl]=useState(null);const[arSupported,setArSupported]=useState(false);const[vrSupported,setVrSupported]=useState(false);const[isPresenting,setIsPresenting]=useState(false);const modelGroupRef=useRef(null);useEffect(()=>{if(!gl)return;gl.xr.enabled=true;const onSessionStart=()=>setIsPresenting(true);const onSessionEnd=()=>setIsPresenting(false);gl.xr.addEventListener('sessionstart',onSessionStart);gl.xr.addEventListener('sessionend',onSessionEnd);return()=>{gl.xr.removeEventListener('sessionstart',onSessionStart);gl.xr.removeEventListener('sessionend',onSessionEnd);};},[gl]);useEffect(()=>{// WebXR feature detection\nlet cancelled=false;async function checkSupport(){try{if(navigator.xr&&navigator.xr.isSessionSupported){const[arOK,vrOK]=await Promise.all([navigator.xr.isSessionSupported('immersive-ar').catch(()=>false),navigator.xr.isSessionSupported('immersive-vr').catch(()=>false)]);if(!cancelled){setArSupported(Boolean(arOK));setVrSupported(Boolean(vrOK));}}}catch(_){}}checkSupport();return()=>{cancelled=true;};},[]);async function enterAR(){if(!gl||!navigator.xr)return;try{const session=await navigator.xr.requestSession('immersive-ar',{requiredFeatures:['local-floor']});await gl.xr.setSession(session);// Tap to place: set model in front of camera on select\nconst onSelect=()=>{try{const renderer=gl;const xrCam=renderer.xr.getCamera();const dir=new THREE.Vector3(0,0,-1).applyQuaternion(xrCam.quaternion);const pos=new THREE.Vector3().setFromMatrixPosition(xrCam.matrixWorld).add(dir.multiplyScalar(0.6));if(modelGroupRef.current){modelGroupRef.current.position.copy(pos);}}catch(_unused){}};session.addEventListener('select',onSelect);session.addEventListener('end',()=>{try{session.removeEventListener('select',onSelect);}catch(_unused2){}});}catch(e){// no-op\n}}async function enterVR(){if(!gl||!navigator.xr)return;try{const session=await navigator.xr.requestSession('immersive-vr',{optionalFeatures:['local-floor']});await gl.xr.setSession(session);}catch(e){// no-op\n}}async function exitXR(){try{var _gl$xr;const session=gl===null||gl===void 0?void 0:(_gl$xr=gl.xr)===null||_gl$xr===void 0?void 0:_gl$xr.getSession();if(session)await session.end();}catch(_unused3){}}function placeInFront(){try{if(!gl)return;const xrCam=gl.xr.getCamera();const dir=new THREE.Vector3(0,0,-1).applyQuaternion(xrCam.quaternion);const pos=new THREE.Vector3().setFromMatrixPosition(xrCam.matrixWorld).add(dir.multiplyScalar(0.6));if(modelGroupRef.current){modelGroupRef.current.position.copy(pos);}}catch(_unused4){}}return/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:8,gridTemplateColumns:'1fr 1fr'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:enterAR,disabled:!arSupported||!gl,className:\"btn btn-primary\",children:\"ENTER AR\"}),/*#__PURE__*/_jsx(\"button\",{onClick:enterVR,disabled:!vrSupported||!gl,className:\"btn btn-secondary\",children:\"ENTER VR\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:420,borderRadius:12,overflow:'hidden',border:'1px solid #333',position:'relative'},children:[/*#__PURE__*/_jsxs(Canvas,{onCreated:_ref3=>{let{gl:renderer,scene,camera}=_ref3;// Match device pixel ratio for clarity\nrenderer.setPixelRatio(Math.min(window.devicePixelRatio,2));renderer.outputEncoding=THREE.sRGBEncoding;setGl(renderer);// Initial camera position\ncamera.position.set(0,0.25,1.2);},children:[/*#__PURE__*/_jsx(\"ambientLight\",{intensity:0.5}),/*#__PURE__*/_jsx(\"directionalLight\",{position:[1,1,1],intensity:0.8}),/*#__PURE__*/_jsxs(\"mesh\",{rotation:[-Math.PI/2,0,0],position:[0,-0.2,0],children:[/*#__PURE__*/_jsx(\"planeGeometry\",{args:[10,10]}),/*#__PURE__*/_jsx(\"meshStandardMaterial\",{color:\"#222\"})]}),modelUrl?/*#__PURE__*/_jsx(\"group\",{ref:modelGroupRef,position:[0,0.1,0],children:/*#__PURE__*/_jsx(ProductModel,{url:modelUrl,scale:0.4})}):/*#__PURE__*/_jsx(SpinningBox,{position:[0,0,0]})]}),isPresenting&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:8,left:8,right:8,display:'flex',gap:8,justifyContent:'space-between',pointerEvents:'auto'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:8,gridAutoFlow:'column'},children:/*#__PURE__*/_jsx(\"button\",{onClick:placeInFront,className:\"btn btn-primary\",children:\"\\u0110\\u1EB7t tr\\u01B0\\u1EDBc m\\u1EB7t\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:exitXR,className:\"btn btn-secondary\",children:\"Tho\\xE1t AR/VR\"})]})]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'#888',margin:0},children:\"G\\u1EE3i \\xFD: \\\"ENTER AR\\\" c\\u1EA7n thi\\u1EBFt b\\u1ECB h\\u1ED7 tr\\u1EE3 WebXR (Chrome Android). \\\"ENTER VR\\\" c\\u1EA7n tr\\xECnh duy\\u1EC7t/thi\\u1EBFt b\\u1ECB h\\u1ED7 tr\\u1EE3 VR.\"})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Canvas","useFrame","useThree","THREE","jsx","_jsx","jsxs","_jsxs","SpinningBox","props","meshRef","_state","delta","current","rotation","x","y","_objectSpread","ref","children","args","color","ProductModel","_ref","url","scale","groupRef","sceneObj","setSceneObj","error","setError","cancelled","load","mod","GLTFLoader","default","loader","gltf","_gltf$scenes","obj","scene","scenes","bbox","Box3","setFromObject","size","Vector3","getSize","maxDim","Math","max","z","desired","s","setScalar","center","getCenter","position","sub","multiplyScalar","undefined","e","object","R3FXRViewer","_ref2","modelUrl","gl","setGl","arSupported","setArSupported","vrSupported","setVrSupported","isPresenting","setIsPresenting","modelGroupRef","xr","enabled","onSessionStart","onSessionEnd","addEventListener","removeEventListener","checkSupport","navigator","isSessionSupported","arOK","vrOK","Promise","all","catch","Boolean","_","enterAR","session","requestSession","requiredFeatures","setSession","onSelect","renderer","xrCam","getCamera","dir","applyQuaternion","quaternion","pos","setFromMatrixPosition","matrixWorld","add","copy","_unused","_unused2","enterVR","optionalFeatures","exitXR","_gl$xr","getSession","end","_unused3","placeInFront","_unused4","style","display","gap","gridTemplateColumns","onClick","disabled","className","width","height","borderRadius","overflow","border","onCreated","_ref3","camera","setPixelRatio","min","window","devicePixelRatio","outputEncoding","sRGBEncoding","set","intensity","PI","top","left","right","justifyContent","pointerEvents","gridAutoFlow","fontSize","margin"],"sources":["C:/Users/admin/Download/project-long/cellphones/client-cellphones/src/components/ARViewer/R3FXRViewer.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Canvas, useFrame, useThree } from '@react-three/fiber';\r\nimport * as THREE from 'three';\r\n\r\nfunction SpinningBox(props) {\r\n    const meshRef = useRef();\r\n    useFrame((_state, delta) => {\r\n        if (meshRef.current) {\r\n            meshRef.current.rotation.x += delta * 0.5;\r\n            meshRef.current.rotation.y += delta * 0.8;\r\n        }\r\n    });\r\n    return (\r\n        <mesh ref={meshRef} {...props}>\r\n            <boxGeometry args={[0.25, 0.25, 0.25]} />\r\n            <meshStandardMaterial color=\"#4CC3D9\" />\r\n        </mesh>\r\n    );\r\n}\r\n\r\nfunction ProductModel({ url, scale = 0.5 }) {\r\n    const groupRef = useRef();\r\n    const [sceneObj, setSceneObj] = useState(null);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        let cancelled = false;\r\n        async function load() {\r\n            try {\r\n                const mod = await import('three/examples/jsm/loaders/GLTFLoader.js');\r\n                const GLTFLoader = mod.GLTFLoader || mod.default;\r\n                const loader = new GLTFLoader();\r\n                loader.load(\r\n                    url,\r\n                    (gltf) => {\r\n                        if (cancelled) return;\r\n                        const obj = gltf.scene || gltf.scenes?.[0];\r\n                        if (!obj) {\r\n                            setError('Không thể đọc model');\r\n                            return;\r\n                        }\r\n                        // Center and scale roughly\r\n                        const bbox = new THREE.Box3().setFromObject(obj);\r\n                        const size = new THREE.Vector3();\r\n                        bbox.getSize(size);\r\n                        const maxDim = Math.max(size.x, size.y, size.z) || 1;\r\n                        const desired = scale; // meters\r\n                        const s = desired / maxDim;\r\n                        obj.scale.setScalar(s);\r\n                        const center = new THREE.Vector3();\r\n                        bbox.getCenter(center);\r\n                        obj.position.sub(center.multiplyScalar(s));\r\n                        setSceneObj(obj);\r\n                    },\r\n                    undefined,\r\n                    () => {\r\n                        if (!cancelled) setError('Lỗi khi tải model');\r\n                    }\r\n                );\r\n            } catch (e) {\r\n                if (!cancelled) setError('Không tải được GLTFLoader');\r\n            }\r\n        }\r\n        if (url) load();\r\n        return () => { cancelled = true; };\r\n    }, [url, scale]);\r\n\r\n    if (error) return null;\r\n    if (!sceneObj) return null;\r\n    return <primitive object={sceneObj} />;\r\n}\r\n\r\nexport default function R3FXRViewer({ modelUrl }) {\r\n    const [gl, setGl] = useState(null);\r\n    const [arSupported, setArSupported] = useState(false);\r\n    const [vrSupported, setVrSupported] = useState(false);\r\n    const [isPresenting, setIsPresenting] = useState(false);\r\n    const modelGroupRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (!gl) return;\r\n        gl.xr.enabled = true;\r\n        const onSessionStart = () => setIsPresenting(true);\r\n        const onSessionEnd = () => setIsPresenting(false);\r\n        gl.xr.addEventListener('sessionstart', onSessionStart);\r\n        gl.xr.addEventListener('sessionend', onSessionEnd);\r\n        return () => {\r\n            gl.xr.removeEventListener('sessionstart', onSessionStart);\r\n            gl.xr.removeEventListener('sessionend', onSessionEnd);\r\n        };\r\n    }, [gl]);\r\n\r\n    useEffect(() => {\r\n        // WebXR feature detection\r\n        let cancelled = false;\r\n        async function checkSupport() {\r\n            try {\r\n                if (navigator.xr && navigator.xr.isSessionSupported) {\r\n                    const [arOK, vrOK] = await Promise.all([\r\n                        navigator.xr.isSessionSupported('immersive-ar').catch(() => false),\r\n                        navigator.xr.isSessionSupported('immersive-vr').catch(() => false)\r\n                    ]);\r\n                    if (!cancelled) {\r\n                        setArSupported(Boolean(arOK));\r\n                        setVrSupported(Boolean(vrOK));\r\n                    }\r\n                }\r\n            } catch (_) {}\r\n        }\r\n        checkSupport();\r\n        return () => { cancelled = true; };\r\n    }, []);\r\n\r\n    async function enterAR() {\r\n        if (!gl || !navigator.xr) return;\r\n        try {\r\n            const session = await navigator.xr.requestSession('immersive-ar', {\r\n                requiredFeatures: ['local-floor']\r\n            });\r\n            await gl.xr.setSession(session);\r\n            // Tap to place: set model in front of camera on select\r\n            const onSelect = () => {\r\n                try {\r\n                    const renderer = gl;\r\n                    const xrCam = renderer.xr.getCamera();\r\n                    const dir = new THREE.Vector3(0, 0, -1).applyQuaternion(xrCam.quaternion);\r\n                    const pos = new THREE.Vector3().setFromMatrixPosition(xrCam.matrixWorld).add(dir.multiplyScalar(0.6));\r\n                    if (modelGroupRef.current) {\r\n                        modelGroupRef.current.position.copy(pos);\r\n                    }\r\n                } catch {}\r\n            };\r\n            session.addEventListener('select', onSelect);\r\n            session.addEventListener('end', () => {\r\n                try { session.removeEventListener('select', onSelect); } catch {}\r\n            });\r\n        } catch (e) {\r\n            // no-op\r\n        }\r\n    }\r\n\r\n    async function enterVR() {\r\n        if (!gl || !navigator.xr) return;\r\n        try {\r\n            const session = await navigator.xr.requestSession('immersive-vr', {\r\n                optionalFeatures: ['local-floor']\r\n            });\r\n            await gl.xr.setSession(session);\r\n        } catch (e) {\r\n            // no-op\r\n        }\r\n    }\r\n\r\n    async function exitXR() {\r\n        try {\r\n            const session = gl?.xr?.getSession();\r\n            if (session) await session.end();\r\n        } catch {}\r\n    }\r\n\r\n    function placeInFront() {\r\n        try {\r\n            if (!gl) return;\r\n            const xrCam = gl.xr.getCamera();\r\n            const dir = new THREE.Vector3(0, 0, -1).applyQuaternion(xrCam.quaternion);\r\n            const pos = new THREE.Vector3().setFromMatrixPosition(xrCam.matrixWorld).add(dir.multiplyScalar(0.6));\r\n            if (modelGroupRef.current) {\r\n                modelGroupRef.current.position.copy(pos);\r\n            }\r\n        } catch {}\r\n    }\r\n\r\n    return (\r\n        <div style={{ display: 'grid', gap: 12 }}>\r\n            <div style={{ display: 'grid', gap: 8, gridTemplateColumns: '1fr 1fr' }}>\r\n                <button onClick={enterAR} disabled={!arSupported || !gl} className=\"btn btn-primary\">ENTER AR</button>\r\n                <button onClick={enterVR} disabled={!vrSupported || !gl} className=\"btn btn-secondary\">ENTER VR</button>\r\n            </div>\r\n\r\n            <div style={{ width: '100%', height: 420, borderRadius: 12, overflow: 'hidden', border: '1px solid #333', position: 'relative' }}>\r\n                <Canvas onCreated={({ gl: renderer, scene, camera }) => {\r\n                    // Match device pixel ratio for clarity\r\n                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\r\n                    renderer.outputEncoding = THREE.sRGBEncoding;\r\n                    setGl(renderer);\r\n                    // Initial camera position\r\n                    camera.position.set(0, 0.25, 1.2);\r\n                }}>\r\n                    <ambientLight intensity={0.5} />\r\n                    <directionalLight position={[1, 1, 1]} intensity={0.8} />\r\n\r\n                    {/* Ground (only visible in VR/desktop) */}\r\n                    <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -0.2, 0]}>\r\n                        <planeGeometry args={[10, 10]} />\r\n                        <meshStandardMaterial color=\"#222\" />\r\n                    </mesh>\r\n\r\n                    {modelUrl ? (\r\n                        <group ref={modelGroupRef} position={[0, 0.1, 0]}>\r\n                            <ProductModel url={modelUrl} scale={0.4} />\r\n                        </group>\r\n                    ) : (\r\n                        <SpinningBox position={[0, 0, 0]} />\r\n                    )}\r\n                </Canvas>\r\n\r\n                {isPresenting && (\r\n                    <div style={{ position: 'absolute', top: 8, left: 8, right: 8, display: 'flex', gap: 8, justifyContent: 'space-between', pointerEvents: 'auto' }}>\r\n                        <div style={{ display: 'grid', gap: 8, gridAutoFlow: 'column' }}>\r\n                            <button onClick={placeInFront} className=\"btn btn-primary\">Đặt trước mặt</button>\r\n                        </div>\r\n                        <button onClick={exitXR} className=\"btn btn-secondary\">Thoát AR/VR</button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <p style={{ fontSize: 14, color: '#888', margin: 0 }}>\r\n                Gợi ý: \"ENTER AR\" cần thiết bị hỗ trợ WebXR (Chrome Android). \"ENTER VR\" cần trình duyệt/thiết bị hỗ trợ VR.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}