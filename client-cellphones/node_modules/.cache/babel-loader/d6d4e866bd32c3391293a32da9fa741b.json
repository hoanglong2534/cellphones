{"ast":null,"code":"import _objectSpread from \"D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/cellphons/client-cellphones/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"D:\\\\STUDY\\\\PTIT\\\\NAM_4\\\\KI_1\\\\LT_WEB\\\\BTL_GiuaKy\\\\cellphons\\\\client-cellphones\\\\src\\\\components\\\\order\\\\Payment.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport { createOrder, payOrder } from \"../../actions/OrderAction\";\nimport { useHistory } from \"react-router-dom\";\nimport VnPay from \"./VnPay\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Payment() {\n  _s();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [sdkReady, setSdkReady] = useState(false);\n  const [choosePay, setChoosePay] = useState({\n    payLater: false,\n    payOnline: false\n  });\n  const {\n    order\n  } = useSelector(state => state.orderInfo);\n  const payLater = () => {\n    setChoosePay({\n      payOnline: false,\n      payLater: true\n    });\n  };\n  const payOnline = () => {\n    setChoosePay({\n      payLater: false,\n      payOnline: true\n    });\n  };\n  const successPaymentHandler = async paymentResult => {\n    const OrderPaid = _objectSpread(_objectSpread({}, order), {}, {\n      status: \"pendding\",\n      paymentMethod: \"payOnline\",\n      paymentResult: _objectSpread({}, paymentResult)\n    });\n    await dispatch(createOrder(OrderPaid));\n    history.push(\"/orderSuccess\");\n  };\n  const SendOrderPayLater = async () => {\n    const OrderPaid = _objectSpread(_objectSpread({}, order), {}, {\n      status: \"pendding\",\n      paymentMethod: \"payLater\"\n    });\n    await dispatch(createOrder(OrderPaid));\n    history.push(\"/orderSuccess\");\n  };\n  useEffect(() => {\n    const addPayPalScript = async () => {\n      const {\n        data\n      } = await axios.get(\"http://localhost:4000/api/config/paypal\");\n      const script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.src = \"https://www.paypal.com/sdk/js?client-id=\".concat(data);\n      script.async = true;\n      script.onload = () => {\n        setSdkReady(true);\n      };\n      document.body.appendChild(script);\n      addPayPalScript();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"choose-pay\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"CH\\u1ECCN PH\\u01AF\\u01A0NG TH\\u1EE8C THANH TO\\xC1N \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"choose\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: choosePay.payLater ? \"active\" : \"\",\n        onClick: () => payLater(),\n        children: \"Thanh to\\xE1n khi nh\\u1EADn h\\xE0ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: choosePay.payOnline ? \"active\" : \"\",\n        onClick: () => payOnline(),\n        children: \"Thanh to\\xE1n Online\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), choosePay.payLater ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"customer-order\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: SendOrderPayLater,\n        children: \"\\u0110\\u1EB7t H\\xE0ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this) : \"\", choosePay.payOnline ? /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"paypal\",\n      children: [/*#__PURE__*/_jsxDEV(VnPay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PayPalButton, {\n        className: \"paypal-btn\",\n        style: {\n          color: \"white\",\n          marginTop: '1rem'\n        },\n        amount: 1,\n        onSuccess: successPaymentHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this) : \"\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(Payment, \"vHU8D4t/4ABXfEqqA2eBbyAhbVE=\", false, function () {\n  return [useHistory, useDispatch, useSelector];\n});\n_c = Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","axios","PayPalButton","createOrder","payOrder","useHistory","VnPay","jsxDEV","_jsxDEV","Payment","_s","history","dispatch","sdkReady","setSdkReady","choosePay","setChoosePay","payLater","payOnline","order","state","orderInfo","successPaymentHandler","paymentResult","OrderPaid","_objectSpread","status","paymentMethod","push","SendOrderPayLater","addPayPalScript","data","get","script","document","createElement","type","src","concat","async","onload","body","appendChild","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","color","marginTop","amount","onSuccess","_c","$RefreshReg$"],"sources":["D:/STUDY/PTIT/NAM_4/KI_1/LT_WEB/BTL_GiuaKy/cellphons/client-cellphones/src/components/order/Payment.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport { createOrder, payOrder } from \"../../actions/OrderAction\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport VnPay from \"./VnPay\";\r\n\r\nexport default function Payment() {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [sdkReady, setSdkReady] = useState(false);\r\n  const [choosePay, setChoosePay] = useState({\r\n    payLater: false,\r\n    payOnline: false,\r\n  });\r\n\r\n  const { order } = useSelector((state) => state.orderInfo);\r\n\r\n\r\n  const payLater = () => {\r\n    setChoosePay({ payOnline: false, payLater: true });\r\n  };\r\n\r\n  const payOnline = () => {\r\n    setChoosePay({ payLater: false, payOnline: true });\r\n  };\r\n\r\n  const successPaymentHandler = async (paymentResult) => {\r\n    const OrderPaid = {\r\n      ...order,\r\n      status: \"pendding\",\r\n      paymentMethod: \"payOnline\",\r\n      paymentResult: {...paymentResult},\r\n    };\r\n    await dispatch(createOrder(OrderPaid));\r\n    history.push(\"/orderSuccess\");\r\n  };\r\n\r\n  const SendOrderPayLater = async () => {\r\n    const OrderPaid = {\r\n      ...order,\r\n      status: \"pendding\",\r\n      paymentMethod: \"payLater\",\r\n    };\r\n\r\n    await dispatch(createOrder(OrderPaid))\r\n    history.push(\"/orderSuccess\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    const addPayPalScript = async () => {\r\n      const { data } = await axios.get(\r\n        \"http://localhost:4000/api/config/paypal\"\r\n      );\r\n      const script = document.createElement(\"script\");\r\n      script.type = \"text/javascript\";\r\n      script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\r\n      script.async = true;\r\n      script.onload = () => {\r\n        setSdkReady(true);\r\n      };\r\n      document.body.appendChild(script);\r\n\r\n      addPayPalScript();\r\n    };\r\n  }, []);\r\n  return (\r\n    <div className=\"choose-pay\">\r\n      <h4>CHỌN PHƯƠNG THỨC THANH TOÁN </h4>\r\n      <div className=\"choose\">\r\n        <button\r\n          type=\"submit\"\r\n          className={choosePay.payLater ? \"active\" : \"\"}\r\n          onClick={() => payLater()}\r\n        >\r\n          Thanh toán khi nhận hàng\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className={choosePay.payOnline ? \"active\" : \"\"}\r\n          onClick={() => payOnline()}\r\n        >\r\n          Thanh toán Online\r\n        </button>\r\n      </div>\r\n      {choosePay.payLater ? (\r\n        <div className=\"customer-order\">\r\n          <button onClick={SendOrderPayLater}>Đặt Hàng</button>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      {choosePay.payOnline ? (\r\n        <button type=\"submit\" className=\"paypal\">\r\n          \r\n          <VnPay></VnPay>\r\n          <PayPalButton\r\n            className=\"paypal-btn\"\r\n            style={{ color: \"white\", marginTop: '1rem' }}\r\n            amount={1}\r\n            onSuccess={successPaymentHandler}\r\n          ></PayPalButton>\r\n        </button>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}